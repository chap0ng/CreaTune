/* ==========================================================================
   IMPORTS & VARIABLES
   ========================================================================== */

@import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

:root {
  /* Primary Colors */
  --warm-yellow: #f6c052;
  --steel-blue: #699bc8;
  --sage-green: #8ea47d;
  --warm-beige: #f5eee0;
  --dark-slate: #2d3142;
  --coral-red: #e6695a;

  /* Blended Colors */
  --yellow-blue: #a0ab8d;
  --blue-green: #79a397;
  --yellow-green: #bea867;
  --all-three: #8fa082;
}

/* ==========================================================================
   BASE STYLES
   ========================================================================== */

* {
  margin: 1px;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'VT323', monospace;
  line-height: 1.6;
  color: var(--dark-slate);
  background-color: var(--warm-beige);
  font-size: 20px;
  
  /* Force landscape orientation */
  transform-origin: center center;
}

/* Landscape orientation support */
@media screen and (orientation: portrait) {
  body {
    transform: rotate(90deg);
    transform-origin: center center;
    width: 100vh;
    height: 100vw;
    overflow: hidden;
    position: absolute;
    top: 0;
    left: 0;
  }
}

/* ==========================================================================
   MAIN LAYOUT
   ========================================================================== */

.frameidle {
  display: grid;
  grid-template-columns: 20px 1fr 20px;
  grid-template-rows: 20px 1fr 20px;
  grid-template-areas:
    "corner1 frametop corner2"
    "frameleft framebackground frameright"
    "corner3 framebottom corner4";
  width: 100vw;
  height: 100vh;
  max-width: min(100vw, calc(100vh * 1.6));
  max-height: min(100vh, calc(100vw / 1.6));
  margin: 0 auto;
  padding: min(80px, 8vw) min(60px, 6vw) min(100px, 10vw) min(60px, 6vw);
  position: relative;
}

/* ==========================================================================
   FRAME COMPONENTS
   ========================================================================== */

/* Corners */
.corner1, .corner2, .corner3, .corner4 {
  background-color: var(--coral-red);
}

.corner1 {
  grid-area: corner1;
  transition: transform;
  will-change: transform;
}

.corner2 {
  grid-area: corner2;
  transition: transform;
  will-change: transform;
}

.corner3 { grid-area: corner3; }
.corner4 { grid-area: corner4; }

/* Top bar */
.frametop {
  grid-area: frametop;
  background-color: var(--steel-blue);
  user-select: none;
  -webkit-user-select: none;
  touch-action: none;
  cursor: ns-resize;
  width: 100%;
  height: 100%;
}

/* Side frames */
.frameleft {
  grid-area: frameleft;
  background-color: var(--steel-blue);
  will-change: height;
}

.frameright {
  grid-area: frameright;
  background-color: var(--steel-blue);
  will-change: height;
}

.framebottom {
  grid-area: framebottom;
  background-color: var(--steel-blue);
}

/* Performance optimizations */
.frametop, .corner1, .corner2 {
  will-change: transform;
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

.corner1, .corner2 {
  position: relative;
  z-index: 0;
}

.framebackground, .frameleft, .frameright {
  will-change: margin-top;
}

/* ==========================================================================
   FRAME BACKGROUNDS & STATES
   ========================================================================== */

.framebackground {
  grid-area: framebackground;
  background-color: var(--warm-beige);
  border: none;
  will-change: margin-top;
  position: relative;
  overflow: hidden;
  
  /* Smooth background transitions */
  transition: background-color 0.4s ease, background-image 0.4s ease;
}

/* ESP32 Connection States */
.framebackground.soil {
  background-image: url('images/soil-background.jpg');
  background-size: cover;
  background-position: center;
}

.framebackground.temp {
  background-color: var(--coral-red);
}

.framebackground.light {
  background-color: var(--warm-yellow);
}

/* Combined states */
.framebackground.soil.light {
  background: linear-gradient(45deg, var(--sage-green), var(--warm-yellow));
}

.framebackground.soil.temp {
  background: linear-gradient(45deg, var(--sage-green), var(--coral-red));
}

.framebackground.light.temp {
  background: linear-gradient(45deg, var(--warm-yellow), var(--coral-red));
}

.framebackground.soil.light.temp {
  background: linear-gradient(120deg, var(--sage-green), var(--warm-yellow), var(--coral-red));
}

.framebackground.soil-background {
  width: 64px;
  height: 64px;
  background-image: url('sprite/soil-background.png');
  background-size: 64px 64px;
  animation: grid-animation 2s steps(4) 5s;
  z-index: 1;
}

/* ==========================================================================
   CREATURES
   ========================================================================== */

.idle-creature, 
.soil-creature, 
.light-creature {
  position: absolute;
  top: calc(50% + 10px);
  left: calc(50% + 0px);
  transform: translate(-50%, -50%) scale(0);
  width: min(30vw, 20vh);
  height: min(30vw, 20vh);
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  opacity: 0;
  z-index: 5;
  
  /* Smooth transitions for appearance/disappearance */
  transition: all 0.3s cubic-bezier(0.34, 1.56, 0.64, 1);
}

/* Soil Creature */
.soil-creature {
  background-image: url('sprites/creatures/soil-creature.png');
  background-color: transparent;
}

.soil-creature.active {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

/* Light Creature */
.light-creature {
  background-image: url('sprites/creatures/light-creature.png');
  background-color: transparent;
}

.light-creature.active {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

/* Idle Creature */
.idle-creature {
  background-image: url('sprites/creatures/idle-creature.png');
  background-color: transparent;
}

.idle-creature.active {
  opacity: 1;
  transform: translate(-50%, -50%) scale(1);
}

/* Multiple creatures positioning */
.multiple-creatures .soil-creature.active {
  left: calc(50% - 15px);
  transform: translate(-50%, -50%) scale(0.9);
}

.multiple-creatures .light-creature.active {
  left: calc(50% + 15px);
  transform: translate(-50%, -50%) scale(0.9);
}

/* ==========================================================================
   ANIMATIONS
   ========================================================================== */

@keyframes frametop {
  0% { background-position: 0 0; }
  25% { background-position: -256px 0; }
  50% { background-position: -512px 0; }
  75% { background-position: 0 -64px; }
  100% { background-position: -256px -64px; }
}

@keyframes grid-animation {
  0% { background-position: 0 0; }
  25% { background-position: -256px 0; }
  50% { background-position: -512px 0; }
  75% { background-position: 0 -64px; }
  100% { background-position: -256px -64px; }
}

/* ==========================================================================
   DISCONNECTION STATES
   ========================================================================== */

.framebackground.disconnected {
  animation: disconnected-flash 2s ease-in-out;
}

@keyframes disconnected-flash {
  0% { opacity: 1; }
  50% { opacity: 0.5; }
  100% { opacity: 1; }
}