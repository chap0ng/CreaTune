/* ==========================================================================
   IMPORTS & VARIABLES
   ========================================================================== */

@import url('https://fonts.googleapis.com/css2?family=VT323&display=swap');

:root {
  /* Primary Colors */
  --warm-yellow: #f6c052;
  --steel-blue: #699bc8;
  --sage-green: #8ea47d;
  --warm-beige: #f5eee0;
  --dark-slate: #2d3142;
  --coral-red: #e6695a;

  /* Blended Colors */
  --yellow-blue: #a0ab8d;
  --blue-green: #79a397;
  --yellow-green: #bea867;
  --all-three: #8fa082;
}

/* ==========================================================================
   BASE STYLES
   ========================================================================== */

* {
  margin: 1px;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'VT323', monospace;
  line-height: 1.6;
  color: var(--dark-slate);
  background-color: var(--warm-beige);
  font-size: 20px;
}

/* ==========================================================================
   MAIN LAYOUT
   ========================================================================== */

.frameidle {
  display: grid;
  grid-template-columns: 20px 1fr 20px;
  grid-template-rows: 20px 1fr 20px;
  grid-template-areas:
    "corner1 frametop corner2"
    "frameleft framebackground frameright"
    "corner3 framebottom corner4";
  width: 100vw;
  height: 100vh;
  max-width: min(100vw, calc(100vh * 1.6));
  max-height: min(100vh, calc(100vw / 1.6));
  margin: 10px;
  padding: min(80px, 8vw) min(60px, 6vw) min(100px, 10vw) min(60px, 6vw);
  position: relative;
}

/* ==========================================================================
   FRAME COMPONENTS
   ========================================================================== */

/* Corners */
.corner1, .corner2, .corner3, .corner4 {
  background-color: var(--coral-red);
}

.corner1 {
  grid-area: corner1;
  transition: transform;
  will-change: transform;
}

.corner2 {
  grid-area: corner2;
  transition: transform;
  will-change: transform;
}

.corner3 { grid-area: corner3; }
.corner4 { grid-area: corner4; }

/* Top bar */
.frametop {
  grid-area: frametop;
  background-color: var(--steel-blue);
  user-select: none;
  -webkit-user-select: none;
  touch-action: none;
  cursor: ns-resize;
  width: 100%;
  height: 100%;
}

/* Side frames */
.frameleft {
  grid-area: frameleft;
  background-color: var(--steel-blue);
  will-change: height;
}

.frameright {
  grid-area: frameright;
  background-color: var(--steel-blue);
  will-change: height;
}

.framebottom {
  grid-area: framebottom;
  background-color: var(--steel-blue);
}

/* Performance optimizations */

.frametop, .corner1, .corner2 {
  will-change: transform;
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

.corner1, .corner2 {
  position: relative;
  z-index: 0;
}

.framebackground, .frameleft, .frameright {
  will-change: margin-top;
}

/* ==========================================================================
   FRAME BACKGROUNDS & STATES
   ========================================================================== */

/*no esp32 connected background*/
.framebackground {
  grid-area: framebackground;
  background-color: var(--warm-beige);
  border: none;
  will-change: margin-top;
  position: relative;
  overflow: hidden;
  animation: idlebackground 2s steps(4) 5s;
}

/* Background if esp32 soil */
.framebackground.soil-background {
  width: 64px;
  height: 64px;
  background-image: url('sprite/soil-background.jpg');
  background-size: 64px 64px;
  animation: soilbackground 2s steps(4) 5s;
  z-index: 1;
}
/* Background if esp32 temp */
.framebackground.temp-background {
  width: 64px;
  height: 64px;
  background-image: url('sprite/soil-background.png');
  background-size: 64px 64px;
  animation: tempbackground 2s steps(4) 5s;
  z-index: 1;
}
/* Background if esp32 light */
.framebackground.light-background {
  width: 64px;
  height: 64px;
  background-image: url('sprite/soil-background.png');
  background-size: 64px 64px;
  animation: lightbackground 2s steps(4) 5s;
  z-index: 1;
}

/* ==========================================================================
   CREATURES
   ========================================================================== */

.idle-creature, .soil-creature, .light-creature, .temp-creature {
  position: absolute;
  top: calc(50% + 0px);
  width: 60%;
  height: 60%;
  transform: translate(-50%, -50%);
  background-size: contain;
  background-repeat: no-repeat;
  background-position: center;
  display: none;
  z-index: 5;
  transition: transform 0.3s ease, filter 0.3s ease;
}

.soil-creature {
  background-image: url('sprites/creatures/soil-creature.png');
  background-color: transparent;
  animation: soilcreature 2s steps(4) infinite;
}

.soil-creature.active {
  display: block;
}

/* Creature reaction animations */
.creature-reacting {
  transform: translate(-50%, -50%) scale(1.15) !important;
  filter: brightness(1.3) saturate(1.5) !important;
  transition: transform 0.4s ease, filter 0.4s ease !important;
}

/* Additional creature states */
.soil-creature.hydrated {
  filter: hue-rotate(20deg) brightness(1.1);
}

.soil-creature.dry {
  filter: sepia(0.3) brightness(0.9);
}

/* ==========================================================================
   ANIMATIONS
   ========================================================================== */

@keyframes soilcreature {
  0% { background-position: 0 0; }
  25% { background-position: -256px 0; }
  50% { background-position: -512px 0; }
  75% { background-position: 0 -64px; }
  100% { background-position: -256px -64px; }
}

@keyframes idlebackground {
  0% { background-position: 0 0; }
  25% { background-position: -256px 0; }
  50% { background-position: -512px 0; }
  75% { background-position: 0 -64px; }
  100% { background-position: -256px -64px; }
}

@keyframes soilbackground {
  0% { background-position: 0 0; }
  25% { background-position: -256px 0; }
  50% { background-position: -512px 0; }
  75% { background-position: 0 -64px; }
  100% { background-position: -256px -64px; }
}

/* Pulse animation for active creatures */
@keyframes creaturePulse {
  0%, 100% { transform: translate(-50%, -50%) scale(1); }
  50% { transform: translate(-50%, -50%) scale(1.05); }
}

.creature-active {
  animation: creaturePulse 3s ease-in-out infinite;
}